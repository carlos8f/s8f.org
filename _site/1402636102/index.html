<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Motley | s8f.org ðŸ’¾ I stepped inside and went straight for the canisters</title>
<meta name="description" content="">
<meta name="author" content="Carlos Rodriguez">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
<link href="https://fonts.googleapis.com/css?family=Roboto+Mono:500|Source+Sans+Pro:400,400i,900&amp;subset=latin-ext" rel="stylesheet">
<link href="http://localhost:4000/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
<link href="http://localhost:4000/atom.xml" rel="alternate" title="s8f.org ðŸ’¾ I stepped inside and went straight for the canisters" type="application/atom+xml">
</head>
<body>
  <div class="main-column">
    <section class="post-section section">
  <header class="entry-header">
    <h1 class="entry-title">Motley</h1>
    <div class="meta">
      
      <time datetime="2014-06-12T00:00:00-07:00" pubdate data-updated="true">
  <!-- via: http://alanwsmith.com/jekyll-liquid-date-formatting-examples -->
  June 12<span>th</span>, 2014
</time>

    </div>
  </header>

  <div class="entry-content">
  <p><img src="https://raw.github.com/carlos8f/motley/master/assets/motley-full.png" alt="motley" /></p>

<h2 id="get-started-in-3-shell-commands">Get Started in 3 shell commands:</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone git@github.com:carlos8f/motley-init.git
cd motley-init &amp;&amp; npm install
node server.js
</code></pre></div></div>

<p>(or just fork the <a href="https://github.com/carlos8f/motley-init">motley-init</a> repo!)</p>

<h2 id="example-serverjs">Example server.js</h2>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">motley</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'motley'</span><span class="p">)</span>

<span class="k">try</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">motley</span><span class="p">({</span>
    <span class="na">_ns</span><span class="p">:</span> <span class="s1">'motley'</span><span class="p">,</span>
    <span class="na">_maps</span><span class="p">:</span> <span class="p">[</span>
      <span class="c1">// require()'ed motley plugins go here.</span>
    <span class="p">],</span>
    <span class="s1">'hooks.listen[]'</span><span class="p">:</span> <span class="kd">function</span> <span class="nx">container</span> <span class="p">(</span><span class="kd">get</span><span class="p">,</span> <span class="kd">set</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kd">function</span> <span class="nx">task</span> <span class="p">(</span><span class="nx">cb</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">get</span><span class="p">(</span><span class="s1">'console'</span><span class="p">).</span><span class="nx">log</span><span class="p">(</span><span class="s1">'listening on http://localhost:'</span> <span class="o">+</span> <span class="kd">get</span><span class="p">(</span><span class="s1">'site.server'</span><span class="p">).</span><span class="nx">address</span><span class="p">().</span><span class="nx">port</span> <span class="o">+</span> <span class="s1">'/'</span><span class="p">)</span>
        <span class="nx">setImmediate</span><span class="p">(</span><span class="nx">cb</span><span class="p">)</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="s1">'middleware[]'</span><span class="p">:</span> <span class="kd">function</span> <span class="nx">container</span> <span class="p">(</span><span class="kd">get</span><span class="p">,</span> <span class="kd">set</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kd">function</span> <span class="nx">handler</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">res</span><span class="p">.</span><span class="nx">vars</span> <span class="o">||</span> <span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">vars</span> <span class="o">=</span> <span class="p">{})</span>
        <span class="nx">res</span><span class="p">.</span><span class="nx">vars</span><span class="p">.</span><span class="nx">nonce</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span>
        <span class="nx">next</span><span class="p">()</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="s1">'controllers[]'</span><span class="p">:</span> <span class="kd">function</span> <span class="nx">container</span> <span class="p">(</span><span class="kd">get</span><span class="p">,</span> <span class="kd">set</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kd">get</span><span class="p">(</span><span class="s1">'controller'</span><span class="p">)()</span>
        <span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">({</span>
            <span class="s1">'welcome'</span><span class="p">:</span> <span class="s1">'to '</span> <span class="o">+</span> <span class="kd">get</span><span class="p">(</span><span class="s1">'conf.site.title'</span><span class="p">)</span> <span class="o">+</span> <span class="s1">'!'</span><span class="p">,</span>
            <span class="s1">'version'</span><span class="p">:</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'./package.json'</span><span class="p">).</span><span class="nx">version</span><span class="p">,</span>
            <span class="s1">'nonce'</span><span class="p">:</span> <span class="nx">res</span><span class="p">.</span><span class="nx">vars</span><span class="p">.</span><span class="nx">nonce</span>
          <span class="p">})</span>
        <span class="p">})</span>
    <span class="p">},</span>
    <span class="s1">'hooks.close[]'</span><span class="p">:</span> <span class="kd">function</span> <span class="nx">container</span> <span class="p">(</span><span class="kd">get</span><span class="p">,</span> <span class="kd">set</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kd">function</span> <span class="nx">task</span> <span class="p">(</span><span class="nx">cb</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">get</span><span class="p">(</span><span class="s1">'console'</span><span class="p">).</span><span class="nx">log</span><span class="p">(</span><span class="s1">'</span><span class="err">\</span><span class="s1">n</span><span class="err">\</span><span class="s1">nmotley says goodbye :)</span><span class="err">\</span><span class="s1">n'</span><span class="p">)</span>
        <span class="nx">setImmediate</span><span class="p">(</span><span class="nx">cb</span><span class="p">)</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">})</span>
<span class="p">}</span>
<span class="k">catch</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">exit</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">exit</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">stack</span><span class="p">)</span>
  <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="p">}</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="nx">exit</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
  <span class="kd">function</span> <span class="nx">onExit</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">app</span><span class="p">.</span><span class="nx">close</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="nx">exit</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
    <span class="p">})</span>
  <span class="p">}</span>
  <span class="nx">process</span><span class="p">.</span><span class="nx">once</span><span class="p">(</span><span class="s1">'SIGINT'</span><span class="p">,</span> <span class="nx">onExit</span><span class="p">)</span>
  <span class="nx">process</span><span class="p">.</span><span class="nx">once</span><span class="p">(</span><span class="s1">'SIGTERM'</span><span class="p">,</span> <span class="nx">onExit</span><span class="p">)</span>
<span class="p">})</span>
</code></pre></div></div>

<h2 id="license">License</h2>

<p>Motley is released under the MIT license.</p>

  </div>

</section>

<section class="comments-section section">
  <div id="disqus_thread" aria-live="polite">
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>
<script type="text/javascript">
  var disqus_shortname = 's8f'; // required: replace example with your forum shortname
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


  </div>

  <section class="sidebar">
  <nav role="navigation" class="main-nav">
    <h3><a href="http://localhost:4000/">s8f.org <i class="fas fa-coffee"></i></a></h3>
    <h3>subpages:</h3>
    <ul class="subpages">
      <li><a href="https://bot18.net/" target="_blank">Bot18 <i class="fas fa-chart-line"></i></a></li>
      <li><a href="http://localhost:4000/salty.html">Salty <i class="fas fa-lock"></i></a></li>
      <li><a href="http://localhost:4000/motley.html">Motley <i class="fas fa-rocket"></i></a></li>
      <li><a href="http://localhost:4000/music.html">Music <i class="fas fa-microphone-alt"></i></a></li>
    </ul>
    <h3>contact me:</h3>
    <ul class="contact">
      <li><a href="/salty.txt">Salty ID <i class="fas fa-lock"></i></a></li>
      <li>GPG <a href="http://localhost:4000/gpg.txt">5FBB2F9838621AFF <i class="fas fa-lock"></i></a></li>
      <li><a href="https://gist.github.com/carlos8f/a0afc9a28937bd800e2a61b316641610">Bitcoin <i class="fab fa-bitcoin"></i></a></li>
      <li><script>document.write('<'+'a'+' '+'h'+'r'+'e'+'f'+'='+"'"+'m'+'&'+'#'+'9'+'7'+';'+'i'+'l'+'t'+'o'+'&'+'#'+'5'+'8'+';'+'c'+
      'a'+'&'+'#'+'1'+'1'+'4'+';'+'l'+'o'+'s'+'%'+'&'+'#'+'5'+'2'+';'+'&'+'#'+'4'+'8'+';'+'s'+'8'+'&'+'#'+
      '1'+'0'+'2'+';'+'&'+'#'+'4'+'6'+';'+'o'+'r'+'g'+"'"+'>E-mail <i class="far fa-envelope-open"></i><'+'/'+'a'+'>');
        </script><noscript>[Turn on JavaScript to see the email address]</noscript></li>
    </ul>
  </nav>
</section>

  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-20561928-1', 'auto');
  ga('send', 'pageview');

</script>


</body>
</html>
